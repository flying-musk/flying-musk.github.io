(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5035:function(t,e,s){Promise.resolve().then(s.bind(s,3929)),Promise.resolve().then(s.bind(s,3607)),Promise.resolve().then(s.bind(s,8755))},3929:function(t,e,s){"use strict";s.d(e,{ImprovementPlans:function(){return o}});var r=s(7437),a=s(2265),n=s(345);function l(t){let{currentProbability:e,planProbability:s}=t,l=(0,a.useRef)(null),i=!1;return(0,a.useEffect)(()=>{if(i)return;let t=n.Nb1().innerRadius(72).outerRadius(73).startAngle(0).endAngle(2*Math.PI),r=n.Nb1().innerRadius(67).outerRadius(79).cornerRadius(25).startAngle(Math.PI/4).endAngle(2*Math.PI*s),a=n.Nb1().innerRadius(67).outerRadius(79).cornerRadius(0).startAngle(0).endAngle(2*Math.PI*e),o=n.Ys(l.current);o.selectAll("*").remove(),o.append("path").attr("d",t).attr("fill","#E0E0E0"),o.append("path").attr("d",r).attr("fill",'url("#paint1_linear_21_1645")'),o.append("path").attr("d",a).attr("fill",'url("#paint0_linear_21_1645")'),i=!0},[e,s]),(0,r.jsxs)("svg",{className:"grow",children:[(0,r.jsx)("g",{ref:l,transform:"translate(80,80)"}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"paint0_linear_21_1645",x1:"151.93",y1:"151.18",x2:"20.2841",y2:"-15.4344",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#379696"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#9EC8C0"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_21_1645",x1:"151.93",y1:"151.18",x2:"20.2841",y2:"-15.4344",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#5B507A"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#9EADC8"})]})]})]})}function i(t){let{currentScore:e,targetScore:s}=t,l=(0,a.useRef)(null);return(0,a.useEffect)(()=>{let t=n.Ys(l.current);t.selectAll("*").remove(),t.append("rect").attr("width",130).attr("height",12).attr("rx",6).attr("fill","#9EC8C0").attr("fill-opacity",.35),t.append("rect").attr("width",s/100*130).attr("height",12).attr("rx",6).attr("fill","url(#paint3_linear_21_1671)"),t.append("rect").attr("width",e/100*130).attr("height",12).attr("rx",6).attr("fill","#9EC8C0")},[e,s]),(0,r.jsxs)("svg",{className:"grow",children:[(0,r.jsx)("g",{ref:l}),(0,r.jsx)("defs",{xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsxs)("linearGradient",{id:"paint3_linear_21_1671",x1:"82",y1:"12",x2:"79.5489",y2:"-9.19807",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#5B507A"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#9EADC8"})]})})]})}function o(t){let{improvementPlans:e}=t;console.log("improvementPlans",e);let s=(0,a.useRef)(null),[n,o]=(0,a.useState)((null==e?void 0:e.cur_prob)||0),[x,c]=(0,a.useState)((null==e?void 0:e.items.map(t=>{let{plan_id:e,plan_prob:s,items:r}=t;return{planId:e,planProbability:s,subjects:r.map(t=>{let{current_score:e,subject_id:s,subject_name:r,target_score:a}=t;return{subjectId:s,subjectName:r,currentScore:e,targetScore:a}})}}))||[]),[d,p]=(0,a.useState)(0);return(0,r.jsxs)("div",{className:"basis-0 grow p-[20px] grid gap-[8px]",children:[(0,r.jsx)("div",{className:"font-[700] text-[14px]",children:"改善プラン"}),(0,r.jsxs)("div",{tabIndex:0,ref:s,className:"p-[5px] rounded-[8px] bg-gradient-to-tl from-[#379696] to-[#9EC8C0] font-[700] text-[13px] text-[#ffffff] flex justify-center cursor-pointer relative group/plans z-[100]",children:["現在選択したプラン：",x[d].planId,(0,r.jsx)("div",{className:"bg-[#ffffff] invisible group-focus-within/plans:visible absolute left-[0px] right-[0px] top-[100%] translate-y-[12px] rounded-[10px] p-[8px] cursor-default flex flex-col gap-[5px] shadow-[0px_30px_60px_0px_rgba(0,0,0,0.15)] max-h-[480px] overflow-y-auto",children:x.map((t,e)=>{let{planId:a}=t;return(0,r.jsx)("div",{className:"".concat(e===d?"pointer-events-none bg-[#ddece9]":""," cursor-pointer py-[5px] px-[16px] rounded-[15px] font-[500] text-[#000000] text-[13px] hover:bg-[#ddece9]"),onClick:()=>{var t;p(e),null===(t=s.current)||void 0===t||t.blur()},children:(0,r.jsxs)("div",{className:"grow",children:["プラン",a]})},a)})})]}),(0,r.jsx)("div",{className:"p-[4px] flex justify-center",children:(0,r.jsxs)("div",{className:"w-[160px] h-[160px] relative flex",children:[(0,r.jsx)(l,{currentProbability:n,planProbability:x[d].planProbability}),(0,r.jsx)("div",{className:"right-[26px] top-[50%] translate-y-[-50%] absolute font-[500] text-[16px] text-[#000000]",children:"%"}),(0,r.jsxs)("div",{className:"absolute top-[50%] left-[50%] translate-x-[-50%] translate-y-[-50%] flex flex-col gap-[5px] items-center",children:[(0,r.jsx)("div",{className:"font-[900] text-[20px] text-[#7c7da0]",children:100*x[d].planProbability}),(0,r.jsx)("div",{className:"w-[7px] h-[32px]",children:(0,r.jsxs)("svg",{className:"grow",xmlns:"http://www.w3.org/2000/svg",width:"8",height:"33",viewBox:"0 0 8 33",fill:"none",children:[(0,r.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.80047 5.43465L4.91664 0.439707C4.6603 -0.00428767 4.01945 -0.00428768 3.76311 0.439707L0.879282 5.43465C0.622942 5.87864 0.943368 6.43363 1.45605 6.43363L3.34089 6.43363L3.34089 31.4083C3.34089 31.9601 3.78815 32.4073 4.33988 32.4073C4.8916 32.4073 5.33887 31.9601 5.33887 31.4083L5.33887 6.43363L7.22371 6.43363C7.73639 6.43363 8.05681 5.87864 7.80047 5.43465Z",fill:"url(#paint0_linear_21_1649)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_21_1649",x1:"4.33988",y1:"32.4073",x2:"4.33988",y2:"0.106712",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#9EC8C0"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#6C678E"})]})})]})}),(0,r.jsx)("div",{className:"font-[900] text-[20px] text-[#9EC8C0]",children:100*n})]})]})}),(0,r.jsxs)("div",{className:"flex justify-end gap-[20px]",children:[(0,r.jsxs)("div",{className:"flex gap-[8px] items-center",children:[(0,r.jsx)("div",{className:"w-[30px] h-[12px] rounded-[200px] bg-[#9EC8C0]"}),(0,r.jsx)("div",{className:"font-[500] text-[12px] text-[#000000]",children:"現在"})]}),(0,r.jsxs)("div",{className:"flex gap-[8px] items-center",children:[(0,r.jsx)("div",{className:"w-[30px] h-[12px] rounded-[200px] bg-gradient-to-tl from-[#5B507A] to-[#9EADC8]"}),(0,r.jsx)("div",{className:"font-[500] text-[12px] text-[#000000]",children:"要改善"})]})]}),(0,r.jsxs)("div",{className:"grid gap-[5px]",children:[(0,r.jsxs)("div",{className:"py-[5px] px-[12px] flex justify-between",children:[(0,r.jsx)("div",{className:"font-[700] text-[12px] text-[#1B262C] opacity-50",children:"科目"}),(0,r.jsx)("div",{className:"font-[700] text-[12px] text-[#1B262C] opacity-50",children:"成績 / 偏差値"})]}),x[d].subjects.map(t=>{let{subjectId:e,subjectName:s,currentScore:a,targetScore:n}=t;return(0,r.jsxs)("div",{className:"p-[10px] flex gap-[10px] items-center",children:[(0,r.jsx)("div",{className:"basis-[0] grow font-[500] text-[14px] text-[#000000]",children:s}),(0,r.jsx)("div",{className:"w-[130px] h-[12px] flex",children:(0,r.jsx)(i,{currentScore:a,targetScore:n})}),(0,r.jsxs)("div",{className:"font-[500] text-[12px] text-[#1B262C]",children:[a,"→",n]})]},e)})]})]})}},3607:function(t,e,s){"use strict";s.d(e,{ScoreDistribution:function(){return o}});var r=s(7437),a=s(8814),n=s.n(a),l=s(2265),i=s(345);function o(t){let{scoreDistribution:e}=t,[s,a]=(0,l.useState)((null==e?void 0:e.items.map(t=>{let{subject_id:e,subject_name:s,current_score:r,previous_score:a,importance:n}=t;return{subjectId:e,subjectName:s,currentScore:r,previousScore:a,importance:n}}))||[]),o=(0,l.useRef)(null),x=(0,l.useRef)(null),[c,d]=(0,l.useState)(0),p={top:10,right:30,bottom:20,left:30},f=280-p.top-p.bottom,u=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!o.current)return;let t=()=>{if(o.current){var t,e;null===(t=u.current)||void 0===t||t.classList.add("hidden");let{clientWidth:s}=o.current;d(s-p.left-p.right),null===(e=u.current)||void 0===e||e.classList.remove("hidden")}};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),(0,l.useEffect)(()=>{let t=i.BYU().domain([0,100]).range([0,c]),e=i.BYU().domain([0,100]).range([f,0]),r=i.Ys(x.current);r.selectAll("*").remove(),r.selectAll("line.horizontalGrid").data(e.ticks(10)).enter().append("line").attr("class","horizontalGrid").attr("x1",0).attr("x2",c).attr("y1",t=>e(t)).attr("y2",t=>e(t)).style("stroke","#E1E6F1").style("stroke-opacity",.5),r.selectAll("line.verticalGrid").data(t.ticks(10)).enter().append("line").attr("class","verticalGrid").attr("x1",e=>t(e)).attr("x2",e=>t(e)).attr("y1",0).attr("y2",f).style("stroke","#E1E6F1").style("stroke-opacity",.5),r.append("g").attr("class","x axis").attr("transform","translate(0,"+f+")").style("stroke-opacity",.5).call(i.LLu(t).ticks(10).tickSize(0).tickPadding(8)).selectAll(".tick text").attr("font-size","12px").attr("font-family",n().style.fontFamily).attr("opacity","40%"),r.append("g").attr("class","y axis").style("stroke-opacity",.5).call(i.y4O(e).tickValues(i.w6H(10,101,10)).tickSize(0).tickPadding(8)).selectAll(".tick text").attr("font-size","12px").attr("font-family",n().style.fontFamily).attr("opacity","40%"),r.append("g").attr("class","y axis").attr("transform","translate("+c+",0)").style("stroke-opacity",.5).call(i.Khx(e).tickValues(i.w6H(10,101,10)).tickSize(0).tickPadding(8)).selectAll(".tick text").attr("font-size","12px").attr("font-family",n().style.fontFamily).attr("opacity","40%"),r.append("path").attr("d","M0,"+f+"L"+c+",0").attr("stroke","#B0B0B0").attr("stroke-width","1px").attr("stroke-dasharray","20 3"),r.selectAll(".dot-group").data(s).enter().append("g").attr("class","dot-group").style("transition","opacity 400ms").style("pointer-events","bounding-box").style("cursor","default").each(function(s){i.Ys(this).append("circle").attr("class","dot").attr("cx",t(s.previousScore)).attr("cy",e(s.currentScore)).attr("r",6).attr("fill","#095EAD").attr("fill-opacity",s.importance),i.Ys(this).append("text").attr("class","dot-label").attr("fill","black").attr("font-size","12px").attr("x",t(s.previousScore)+10).attr("y",e(s.currentScore)+4.2).text(s.subjectName)}).on("mouseenter",function(){r.selectAll(".dot-group").attr("opacity",.2),i.Ys(this).attr("opacity",1)}).on("mouseleave",function(){r.selectAll(".dot-group").attr("opacity","unset")})},[s,c]),(0,r.jsxs)("div",{className:"basis-0 grow p-[20px] grid gap-[8px] max-[1200px]:border-t-[2px] max-[1200px]:border-t-[#d1d1d1] max-[1200px]:col-[_span_2] max-[860px]:col-[unset]",children:[(0,r.jsxs)("div",{className:"flex gap-[10px] items-center",children:[(0,r.jsx)("div",{className:"font-[700] text-[14px]",children:"成績の分布と重要度"}),(0,r.jsx)("div",{className:"flex w-[20px] h-[20px]",children:(0,r.jsx)("svg",{className:"grow",xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:(0,r.jsx)("path",{d:"M9.99996 1.66669C5.39996 1.66669 1.66663 5.40002 1.66663 10C1.66663 14.6 5.39996 18.3334 9.99996 18.3334C14.6 18.3334 18.3333 14.6 18.3333 10C18.3333 5.40002 14.6 1.66669 9.99996 1.66669ZM10.8333 14.1667H9.16663V9.16669H10.8333V14.1667ZM10.8333 7.50002H9.16663V5.83335H10.8333V7.50002Z",fill:"#BDBDBD"})})})]}),(0,r.jsx)("div",{className:"font-[500] text-[12px] text-[#1B262C] opacity-50",children:"今回の偏差値"}),(0,r.jsx)("div",{ref:o,className:"flex h-[280px]",children:(0,r.jsx)("svg",{ref:u,className:"grow",viewBox:"0 0 ".concat(c+p.left+p.right," 280"),fill:"none",children:(0,r.jsx)("g",{ref:x,transform:"translate(".concat(p.left,",").concat(p.top,")")})})}),(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsxs)("div",{className:"mt-[6px] flex flex-col relative",children:[(0,r.jsx)("div",{className:"flex justify-between",children:["00","50","100"].map(t=>(0,r.jsxs)("div",{className:"flex flex-col gap-[6px] items-center",children:[(0,r.jsx)("div",{className:"font-[500] text-[9px] text-[#1B262C]",children:t}),(0,r.jsx)("div",{className:"border-r border-[black] h-[6px]"})]},t))}),(0,r.jsx)("div",{className:"w-[190px] h-[12px] flex",children:(0,r.jsxs)("svg",{className:"grow",viewBox:"0 0 189 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,r.jsx)("rect",{y:"12",width:"12",height:"189",rx:"4",transform:"rotate(-90 0 12)",fill:"url(#paint0_linear_21_2650)"}),(0,r.jsx)("defs",{children:(0,r.jsxs)("linearGradient",{id:"paint0_linear_21_2650",x1:"6",y1:"12",x2:"6",y2:"201",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"white"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#0058AA"})]})})]})}),(0,r.jsx)("div",{className:"absolute right-[-44px] bottom-[0px] font-[500] text-[12px] text-[#000000] opacity-40",children:"重要度"})]}),(0,r.jsx)("div",{className:"font-[500] text-[12px] text-[#000000] opacity-40",children:"前回の偏差値"})]})]})}},8755:function(t,e,s){"use strict";s.d(e,{TargetSchools:function(){return o}});var r=s(7437),a=s(2265);function n(t){let{ranking:e}=t;return(0,r.jsxs)("div",{className:"w-[37px] h-[37px] flex items-center justify-center relative",children:[1===e?(0,r.jsxs)("svg",{className:"grow",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 31 36",fill:"none",children:[(0,r.jsx)("path",{d:"M13.9368 1.45874C14.7375 0.455469 16.2625 0.45547 17.0632 1.45874L21.2084 6.65276C21.5228 7.04673 21.9744 7.30745 22.4728 7.38276L29.0435 8.37559C30.3127 8.56736 31.0753 9.88811 30.6068 11.0831L28.1812 17.27C27.9972 17.7393 27.9972 18.2607 28.1812 18.73L30.6068 24.9169C31.0753 26.1119 30.3127 27.4326 29.0435 27.6244L22.4728 28.6172C21.9744 28.6925 21.5228 28.9533 21.2084 29.3472L17.0632 34.5413C16.2625 35.5445 14.7375 35.5445 13.9368 34.5413L9.7916 29.3472C9.47718 28.9533 9.0256 28.6925 8.5272 28.6172L1.95645 27.6244C0.687256 27.4326 -0.0752738 26.1119 0.393243 24.9169L2.8188 18.73C3.00278 18.2607 3.00278 17.7393 2.8188 17.27L0.393243 11.0831C-0.0752742 9.88811 0.687258 8.56736 1.95645 8.37559L8.5272 7.38276C9.0256 7.30745 9.47718 7.04673 9.7916 6.65276L13.9368 1.45874Z",fill:"url(#paint0_linear_2037_13)"}),(0,r.jsx)("path",{d:"M13.9368 1.45874C14.7375 0.455469 16.2625 0.45547 17.0632 1.45874L21.2084 6.65276C21.5228 7.04673 21.9744 7.30745 22.4728 7.38276L29.0435 8.37559C30.3127 8.56736 31.0753 9.88811 30.6068 11.0831L28.1812 17.27C27.9972 17.7393 27.9972 18.2607 28.1812 18.73L30.6068 24.9169C31.0753 26.1119 30.3127 27.4326 29.0435 27.6244L22.4728 28.6172C21.9744 28.6925 21.5228 28.9533 21.2084 29.3472L17.0632 34.5413C16.2625 35.5445 14.7375 35.5445 13.9368 34.5413L9.7916 29.3472C9.47718 28.9533 9.0256 28.6925 8.5272 28.6172L1.95645 27.6244C0.687256 27.4326 -0.0752738 26.1119 0.393243 24.9169L2.8188 18.73C3.00278 18.2607 3.00278 17.7393 2.8188 17.27L0.393243 11.0831C-0.0752742 9.88811 0.687258 8.56736 1.95645 8.37559L8.5272 7.38276C9.0256 7.30745 9.47718 7.04673 9.7916 6.65276L13.9368 1.45874Z",fill:"url(#paint1_linear_2037_13)"}),(0,r.jsxs)("defs",{children:[(0,r.jsxs)("linearGradient",{id:"paint0_linear_2037_13",x1:"34",y1:"36.5",x2:"1.7808",y2:"-4.27742",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#379696"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#9EC8C0"})]}),(0,r.jsxs)("linearGradient",{id:"paint1_linear_2037_13",x1:"34",y1:"36.5",x2:"1.7808",y2:"-4.27742",gradientUnits:"userSpaceOnUse",children:[(0,r.jsx)("stop",{stopColor:"#5B507A"}),(0,r.jsx)("stop",{offset:"1",stopColor:"#9EADC8"})]})]})]}):(0,r.jsx)("div",{className:"".concat(2===e?"!bg-[#828282]":""," ").concat(3===e?"!bg-[#BDBDBD]":""," font-[500] text-[12px] text-[#ffffff] bg-[#D8D8D8] rounded-[50%] w-[27px] h-[27px] flex items-center justify-center"),children:e}),1===e?(0,r.jsx)("div",{className:"absolute font-[900] text-[12px] text-[#ffffff]",children:"1"}):""]})}var l=s(345);function i(t){let{schoolId:e,probability:s}=t,n=(0,a.useRef)(null),i=!1;return(0,a.useEffect)(()=>{if(i)return;let t=l.Nb1().innerRadius(18.5).outerRadius(25).startAngle(0).endAngle(2*Math.PI),e=l.Nb1().innerRadius(18.5).outerRadius(25).cornerRadius(25).startAngle(-.05).endAngle(2*Math.PI*s),r=l.Ys(n.current);r.append("path").attr("d",t).attr("fill","#9EC8C0").attr("opacity",.35),r.append("path").attr("d",e).attr("fill",s>.6?"#68CFC9":s>.3?"#F2994A":"#EB5757"),r.append("text").datum(0).text("".concat(100*s,"%")).attr("class","counterText").attr("text-anchor","middle").attr("alignment-baseline","middle").attr("fill","#000").attr("font-size","12px"),i=!0},[e]),(0,r.jsx)("div",{className:"w-[50px] h-[50px] flex",children:(0,r.jsx)("svg",{className:"grow",children:(0,r.jsx)("g",{ref:n,transform:"translate(25,25)"})})})}function o(t){var e;let{targetSchools:s}=t,[l,o]=(0,a.useState)((null==s?void 0:null===(e=s.items)||void 0===e?void 0:e.map(t=>{let{school_id:e,school_name:s,ranking:r,prob:a}=t;return{schoolId:e,schoolName:s,ranking:r,probability:a}}))||[]),x=(t,e)=>{t.dataTransfer.setData("ranking",e.toString())},c=t=>{t.preventDefault()},d=(t,e)=>{t.preventDefault();let s=parseInt(t.dataTransfer.getData("ranking"));o(l.map(t=>({...t,ranking:t.ranking===s?e:s<e&&t.ranking>s&&t.ranking<=e?t.ranking-1:s>e&&t.ranking>=e&&t.ranking<s?t.ranking+1:t.ranking})).sort((t,e)=>t.ranking-e.ranking))};return(0,r.jsxs)("div",{className:"basis-0 grow p-[20px] grid gap-[8px] max-[1200px]:!bg-none max-[1200px]:border-r-[2px] max-[1200px]:border-r-[#d1d1d1] max-[860px]:border-r-0 max-[860px]:border-b-[2px] max-[860px]:border-b-[#d1d1d1]",style:{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%"> <line x1="100%" y1="0" x2="100%" y2="100%" stroke="black" stroke-opacity="0.1" stroke-width="2" stroke-dasharray="20 6" stroke-linecap="butt"/></svg>\')'},children:[(0,r.jsx)("div",{className:"font-[700] text-[14px]",children:"志望校リスト"}),(0,r.jsxs)("div",{className:"py-[5px] px-[16px] flex justify-between",children:[(0,r.jsx)("div",{className:"font-[700] text-[12px] text-[#1B262C] opacity-50",children:"志望校"}),(0,r.jsx)("div",{className:"font-[700] text-[12px] text-[#1B262C] opacity-50",children:"合格率予測"})]}),l.map(t=>{let{schoolId:e,schoolName:s,ranking:a,probability:l}=t;return(0,r.jsxs)("div",{className:"".concat(1===a?"bg-[#9EC8C0]/[.35]":""," rounded-[15px] py-[4px] px-[16px] flex items-center gap-[8px]"),draggable:!0,onDragStart:t=>x(t,a),onDragOver:c,onDrop:t=>d(t,a),children:[(0,r.jsx)(n,{ranking:a}),(0,r.jsx)("div",{className:"font-[500] text-[14px] text-[#1B262C]",children:s}),(0,r.jsx)("div",{className:"grow"}),(0,r.jsx)(i,{schoolId:e,probability:l})]},e)})]})}}},function(t){t.O(0,[957,462,971,23,744],function(){return t(t.s=5035)}),_N_E=t.O()}]);
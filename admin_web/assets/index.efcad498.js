import{_ as e,u as t,a,b as r}from"./index.2e435e4a.js";import{d as n,k as o,A as i,j as c,h as l,f as d,B as s,q as u,a as p,w as f,r as h,o as g,x as m,C as y,D as w}from"./element-plus.4376cb67.js";function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},v.apply(this,arguments)}var b=Object.prototype.hasOwnProperty;var x,k,S,A=(x=!1,k=[],S={resolved:function(){return x},resolve:function(){if(!x){x=!0;for(var e=0,t=k.length;e<t;e++)k[e]()}},promise:{then:function(e){x?e():k.push(e)}}},{notify:function(){S.resolve()},wait:function(){return S.promise},render:function(e,t,a){this.wait().then((function(){a(window.grecaptcha.render(e,t))}))},reset:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.reset(e)})))},execute:function(e){void 0!==e&&(this.assertLoaded(),this.wait().then((function(){return window.grecaptcha.execute(e)})))},checkRecaptchaLoad:function(){b.call(window,"grecaptcha")&&b.call(window.grecaptcha,"render")&&this.notify()},assertLoaded:function(){if(!S.resolved())throw new Error("ReCAPTCHA has not been loaded")}});"undefined"!=typeof window&&(window.vueRecaptchaApiLoaded=A.notify);var R=n({name:"VueRecaptcha",props:{sitekey:{type:String,required:!0},theme:{type:String},badge:{type:String},type:{type:String},size:{type:String},tabindex:{type:String},loadRecaptchaScript:{type:Boolean,default:!0},recaptchaScriptId:{type:String,default:"__RECAPTCHA_SCRIPT"},recaptchaHost:{type:String,default:"www.google.com"},language:{type:String,default:""}},emits:["render","verify","expired","error"],setup:function(e,t){var a=t.slots,r=t.emit,n=o(null),c=o(null),l=function(e){r("verify",e)},d=function(){r("expired")},s=function(){r("error")};return i((function(){if(A.checkRecaptchaLoad(),e.loadRecaptchaScript&&!document.getElementById(e.recaptchaScriptId)){var t=document.createElement("script");t.id=e.recaptchaScriptId,t.src="https://"+e.recaptchaHost+"/recaptcha/api.js?onload=vueRecaptchaApiLoaded&render=explicit&hl="+e.language,t.async=!0,t.defer=!0,document.head.appendChild(t)}var o=v({},e,{callback:l,"expired-callback":d,"error-callback":s}),i=n.value,u=a.default?i.children[0]:i;A.render(u,o,(function(e){c.value=e,r("render",e)}))})),{root:n,widgetId:c,reset:function(){A.reset(c.value)},execute:function(){A.execute(c.value)}}},render:function(){var e,t=this.$slots.default;return e="function"==typeof t?t():t,c("div",{ref:"root"},e)}});const _=n({name:"login",components:{VueRecaptcha:R},setup(){const e=t(),n=a(),i=r(),c=l({recaptchaToken:"unset",siteKey:"6LfjGXoUAAAAAJFgeFh_a0qUDVFGXT30YLwdarMM",model:{id:"cksunny",pwd:"xs38f5bk"},rules:{id:[{required:!0,message:"請輸入帳號",trigger:"blur"}],pwd:[{required:!0,message:"請輸入密碼",trigger:"blur"},{min:6,max:12,message:"長度在 6 到 12 字元",trigger:"blur"}]},loading:!1,title:d((()=>"管理")),btnText:d((()=>c.loading?"登入中...":"登入")),loginForm:o(null),verifyMethod:e=>{c.recaptchaToken=e},submit:()=>{c.loading||c.loginForm.validate((async t=>{if(t){c.loading=!0;const t=decodeURIComponent(i.query.redirect);t.startsWith("http")?window.location.href=t:t.startsWith("/")?n.push(t):n.push("/"),e.dispatch("app/setToken","..."),c.loading=!1}}))}});return{...s(c)}}}),V={class:"login"},j={class:"title"},C={class:"hidden flex justify-center pb-6"};var L=e(_,[["render",function(e,t,a,r,n,o){const i=h("el-input"),c=h("el-form-item"),l=h("vue-recaptcha"),d=h("el-button"),s=h("el-form");return g(),u("div",V,[p(s,{class:"form",model:e.model,rules:e.rules,ref:"loginForm"},{default:f((()=>[m("h1",j,y(e.title)+"界面 ",1),p(c,{prop:"id"},{default:f((()=>[p(i,{class:"text",modelValue:e.model.id,"onUpdate:modelValue":t[0]||(t[0]=t=>e.model.id=t),"prefix-icon":"User",clearable:"",placeholder:"用户名"},null,8,["modelValue"])])),_:1}),p(c,{prop:"pwd"},{default:f((()=>[p(i,{class:"text",modelValue:e.model.pwd,"onUpdate:modelValue":t[1]||(t[1]=t=>e.model.pwd=t),"prefix-icon":"Lock","show-password":"",clearable:"",placeholder:"密碼"},null,8,["modelValue"])])),_:1}),m("div",C,[p(l,{sitekey:e.siteKey,onVerify:e.verifyMethod},null,8,["sitekey","onVerify"])]),p(c,null,{default:f((()=>[p(d,{loading:e.loading,type:"primary",class:"btn",onClick:e.submit},{default:f((()=>[w(y(e.btnText),1)])),_:1},8,["loading","onClick"])])),_:1})])),_:1},8,["model","rules"])])}],["__scopeId","data-v-beb5fbc4"]]);export{L as default};
